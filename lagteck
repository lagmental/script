repeat wait() until game:IsLoaded() and game.Players.LocalPlayer

print("ðŸš€ Iniciando Lag Teck Hub v2.0...")

-- SERVIÃ‡OS
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualUser = game:GetService("VirtualUser")
local Lighting = game:GetService("Lighting")
local LocalPlayer = Players.LocalPlayer
local HttpService = game:GetService("HttpService")

_G.JoinTime = os.time()

-- DETECÃ‡ÃƒO DO SEA
local function GetCurrentSea()
    local placeId = game.PlaceId
    if placeId == 2753915549 then return 1
    elseif placeId == 4442272183 then return 2
    elseif placeId == 7449423635 then return 3
    end
    return 1
end

local Sea = GetCurrentSea()

-- SETTINGS
_G.Settings = _G.Settings or {
    AutoFarmLevel = false,
    AutoFarmBoss = false,
    SelectedBoss = "All",
    AutoChest = false,
    FastAttack = false,
    AutoHaki = false,
    AutoFruitSniper = false,
    AutoStoreFruit = false,
    AutoBuyFruit = false,
    SelectedFruit = "Leopard-Leopard",
    AutoRandomFruit = false,
    WeaponType = "Nenhum",
    FarmDistance = 30,
    BringMobs = true,
    WalkOnWater = false,
    RemoveFog = false,
    AntiAFK = false,
    ESPFruit = false,
    ESPIsland = false,
    ESPPlayer = false,
    ESPChest = false,
    SelectedIsland = nil,
    SelectedSea = 1,
    AutoKatakuri = false,
    AutoFactory = false,
    AutoSeaBeast = false,
    SeaEventBoat = "Nenhum",
    SeaDepth = "Mar 1",
    SeaEventActive = false,
    AutoPVP = false,
    SelectedPlayer = nil,
    SafeMode = false
}

-- SISTEMA DE SAVE (SEGURO)
local ConfigFile = "LagTeckHub_Config.json"

local function SaveConfig()
    task.spawn(function()
        pcall(function()
            if writefile then
                writefile(ConfigFile, HttpService:JSONEncode({Settings = _G.Settings, LastSaved = os.time()}))
            end
        end)
    end)
end

local function LoadConfig()
    local loaded = false
    pcall(function()
        if isfile and readfile and isfile(ConfigFile) then
            local data = HttpService:JSONDecode(readfile(ConfigFile))
            if data and data.Settings then
                for k, v in pairs(data.Settings) do
                    _G.Settings[k] = v
                end
                loaded = true
            end
        end
    end)
    return loaded
end

local configLoaded = LoadConfig()

-- TEMA
local Config = {
    Aberto = false,
    Minimizado = false,
    Tema = {
        Fundo = Color3.fromRGB(10,15,30),
        Secundario = Color3.fromRGB(15,25,45),
        Botao = Color3.fromRGB(20,35,60),
        Ativo = Color3.fromRGB(0,120,255),
        Texto = Color3.fromRGB(255,255,255),
        AzulClaro = Color3.fromRGB(50,150,255)
    }
}

-- NOTIFICAÃ‡Ã•ES
local function Notify(texto, duracao)
    duracao = duracao or 3
    task.spawn(function()
        local ScreenGui = Instance.new("ScreenGui")
        ScreenGui.Name = "NotificationGui_" .. tick()
        
        pcall(function()
            ScreenGui.Parent = game:GetService("CoreGui")
        end)
        
        if not ScreenGui.Parent then
            ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
        end
        
        local NotifFrame = Instance.new("Frame", ScreenGui)
        NotifFrame.Size = UDim2.new(0, 0, 0, 0)
        NotifFrame.Position = UDim2.new(0.5, 0, 0, -100)
        NotifFrame.AnchorPoint = Vector2.new(0.5, 0)
        NotifFrame.BackgroundColor3 = Config.Tema.Secundario
        NotifFrame.BorderSizePixel = 0
        
        Instance.new("UICorner", NotifFrame).CornerRadius = UDim.new(0, 10)
        
        local Label = Instance.new("TextLabel", NotifFrame)
        Label.Size = UDim2.new(1, -20, 1, 0)
        Label.Position = UDim2.fromOffset(10, 0)
        Label.Text = texto
        Label.TextColor3 = Color3.new(1, 1, 1)
        Label.BackgroundTransparency = 1
        Label.Font = Enum.Font.GothamBold
        Label.TextSize = 14
        Label.TextWrapped = true
        Label.TextXAlignment = Enum.TextXAlignment.Left
        
        TweenService:Create(NotifFrame, TweenInfo.new(0.3), {
            Size = UDim2.new(0, 300, 0, 60),
            Position = UDim2.new(0.5, 0, 0, 20)
        }):Play()
        
        task.wait(duracao)
        
        TweenService:Create(NotifFrame, TweenInfo.new(0.3), {
            Size = UDim2.new(0, 0, 0, 0),
            Position = UDim2.new(0.5, 0, 0, -100)
        }):Play()
        
        task.wait(0.3)
        ScreenGui:Destroy()
    end)
end

print("âœ… Sistema de notificaÃ§Ãµes OK")

-- FUNÃ‡Ã•ES CORE
local function Tween(obj, time, props)
    local tween = TweenService:Create(obj, TweenInfo.new(time, Enum.EasingStyle.Linear), props)
    tween:Play()
    return tween
end

local function TP(cframe)
    pcall(function()
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
            LocalPlayer.Character.HumanoidRootPart.CFrame = cframe
        end
    end)
end

local function GetRemote()
    local success, remote = pcall(function()
        return ReplicatedStorage:FindFirstChild("Remotes"):FindFirstChild("CommF_")
    end)
    return success and remote or nil
end

print("âœ… FunÃ§Ãµes core OK")

-- GUI
local Gui = Instance.new("ScreenGui")
Gui.Name = "LagTeckHub_" .. tick()
Gui.ResetOnSpawn = false

pcall(function()
    for _, v in pairs(game:GetService("CoreGui"):GetChildren()) do
        if v.Name:find("LagTeckHub") then
            v:Destroy()
        end
    end
end)

local success = pcall(function()
    Gui.Parent = game:GetService("CoreGui")
end)

if not success then
    Gui.Parent = LocalPlayer:WaitForChild("PlayerGui")
end

print("âœ… ScreenGui criado")

-- BOLINHA
local Bubble = Instance.new("ImageButton", Gui)
Bubble.Size = UDim2.fromOffset(50, 50)
Bubble.Position = UDim2.new(0, 20, 0.5, -25)
Bubble.Image = "rbxassetid://118708232212462"
Bubble.BackgroundColor3 = Config.Tema.Botao
Bubble.BorderSizePixel = 0
Bubble.Active = true
Bubble.Draggable = true
Bubble.ZIndex = 999

Instance.new("UICorner", Bubble).CornerRadius = UDim.new(1, 0)

print("âœ… Bolinha criada")

-- PAINEL PRINCIPAL
local Main = Instance.new("Frame", Gui)
Main.Size = UDim2.fromOffset(0, 0)
Main.Position = UDim2.new(0.5, -250, 0.5, -275)
Main.BackgroundColor3 = Config.Tema.Fundo
Main.BackgroundTransparency = 0.1
Main.BorderSizePixel = 0
Main.Visible = false
Main.ZIndex = 1000
Main.Active = true

Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 12)

print("âœ… Painel principal criado")

-- TOP BAR
local Top = Instance.new("Frame", Main)
Top.Size = UDim2.new(1, 0, 0, 50)
Top.BackgroundColor3 = Config.Tema.Secundario
Top.BackgroundTransparency = 0.1
Top.BorderSizePixel = 0

Instance.new("UICorner", Top).CornerRadius = UDim.new(0, 12)

local Title = Instance.new("TextLabel", Top)
Title.Size = UDim2.new(1, -150, 1, -15)
Title.Position = UDim2.fromOffset(10, 0)
Title.Text = "Lag Teck Hub v2.0"
Title.TextColor3 = Config.Tema.Texto
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.GothamBold
Title.TextSize = 15
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.TextYAlignment = Enum.TextYAlignment.Top

local DiscordLink = Instance.new("TextLabel", Top)
DiscordLink.Size = UDim2.new(0, 150, 0, 12)
DiscordLink.Position = UDim2.new(0, 10, 1, -15)
DiscordLink.Text = "discord.gg/RnZ6XHHFj7"
DiscordLink.TextColor3 = Color3.fromRGB(120, 120, 120)
DiscordLink.BackgroundTransparency = 1
DiscordLink.Font = Enum.Font.Gotham
DiscordLink.TextSize = 8
DiscordLink.TextXAlignment = Enum.TextXAlignment.Left

local SeaLabel = Instance.new("TextLabel", Top)
SeaLabel.Size = UDim2.fromOffset(65, 28)
SeaLabel.Position = UDim2.new(1, -170, 0, 11)
SeaLabel.Text = "SEA " .. Sea
SeaLabel.TextColor3 = Color3.new(1, 1, 1)
SeaLabel.BackgroundColor3 = Config.Tema.Ativo
SeaLabel.Font = Enum.Font.GothamBold
SeaLabel.TextSize = 12
SeaLabel.BorderSizePixel = 0

Instance.new("UICorner", SeaLabel).CornerRadius = UDim.new(0, 6)

-- BOTÃ•ES
local MinBtn = Instance.new("TextButton", Top)
MinBtn.Size = UDim2.fromOffset(28, 28)
MinBtn.Position = UDim2.new(1, -98, 0, 11)
MinBtn.Text = "âˆ’"
MinBtn.TextSize = 18
MinBtn.Font = Enum.Font.GothamBold
MinBtn.TextColor3 = Color3.new(1, 1, 1)
MinBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
MinBtn.BorderSizePixel = 0

Instance.new("UICorner", MinBtn).CornerRadius = UDim.new(0, 6)

local MaxBtn = Instance.new("TextButton", Top)
MaxBtn.Size = UDim2.fromOffset(28, 28)
MaxBtn.Position = UDim2.new(1, -65, 0, 11)
MaxBtn.Text = "+"
MaxBtn.TextSize = 18
MaxBtn.Font = Enum.Font.GothamBold
MaxBtn.TextColor3 = Color3.new(1, 1, 1)
MaxBtn.BackgroundColor3 = Color3.fromRGB(100, 150, 100)
MaxBtn.BorderSizePixel = 0
MaxBtn.Visible = false

Instance.new("UICorner", MaxBtn).CornerRadius = UDim.new(0, 6)

local CloseBtn = Instance.new("TextButton", Top)
CloseBtn.Size = UDim2.fromOffset(28, 28)
CloseBtn.Position = UDim2.new(1, -32, 0, 11)
CloseBtn.Text = "âœ•"
CloseBtn.TextSize = 14
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.TextColor3 = Color3.new(1, 1, 1)
CloseBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
CloseBtn.BorderSizePixel = 0

Instance.new("UICorner", CloseBtn).CornerRadius = UDim.new(0, 6)

print("âœ… Top bar OK")

-- BODY
local Body = Instance.new("Frame", Main)
Body.Position = UDim2.fromOffset(0, 55)
Body.Size = UDim2.new(1, 0, 1, -55)
Body.BackgroundTransparency = 1

local WelcomeLabel = Instance.new("TextLabel", Body)
WelcomeLabel.Size = UDim2.new(1, -40, 0, 200)
WelcomeLabel.Position = UDim2.fromOffset(20, 50)
WelcomeLabel.Text = "ðŸŽ® LAG TECK HUB v2.0\n\nâœ… Script carregado com sucesso!\n\nðŸš€ SEA " .. Sea .. "\nðŸ’Ž Level: " .. (LocalPlayer.Data.Level.Value or "N/A") .. "\n\nðŸ“± Discord: discord.gg/RnZ6XHHFj7\n\nâš¡ Todos os sistemas operacionais\nðŸŽ¯ Pronto para uso!"
WelcomeLabel.TextColor3 = Color3.new(1, 1, 1)
WelcomeLabel.BackgroundTransparency = 1
WelcomeLabel.Font = Enum.Font.GothamBold
WelcomeLabel.TextSize = 14
WelcomeLabel.TextWrapped = true

print("âœ… Body OK")

-- CONTROLES
Bubble.MouseButton1Click:Connect(function()
    Config.Aberto = not Config.Aberto
    if Config.Aberto then
        Main.Visible = true
        Tween(Main, 0.3, {Size = UDim2.fromOffset(500, 450)})
        Notify("âœ… Painel Aberto!", 2)
    else
        Tween(Main, 0.3, {Size = UDim2.fromOffset(0, 0)})
        task.wait(0.3)
        Main.Visible = false
    end
end)

MinBtn.MouseButton1Click:Connect(function()
    Config.Minimizado = true
    Body.Visible = false
    Tween(Main, 0.3, {Size = UDim2.fromOffset(500, 55)})
    MinBtn.Visible = false
    MaxBtn.Visible = true
    Notify("ðŸ“¦ Minimizado", 1)
end)

MaxBtn.MouseButton1Click:Connect(function()
    Config.Minimizado = false
    Body.Visible = true
    Tween(Main, 0.3, {Size = UDim2.fromOffset(500, 450)})
    MaxBtn.Visible = false
    MinBtn.Visible = true
    Notify("ðŸ“‚ Expandido", 1)
end)

CloseBtn.MouseButton1Click:Connect(function()
    Config.Aberto = false
    Tween(Main, 0.3, {Size = UDim2.fromOffset(0, 0)})
    task.wait(0.3)
    Main.Visible = false
    Notify("âœ… Fechado", 1)
end)

print("âœ… Controles conectados")

-- NOTIFICAÃ‡ÃƒO FINAL
task.wait(1)

print("=================================")
print("  LAG TECK HUB v2.0 CARREGADO")
print("=================================")
print("âœ… SEA: " .. Sea)
print("âœ… GUI: Operacional")
print("âœ… Discord: discord.gg/RnZ6XHHFj7")
print("=================================")

Notify("âœ… Lag Teck Hub Carregado!\n\nðŸŽ® Clique na bolinha para abrir", 3)

print("ðŸŽ‰ SCRIPT TOTALMENTE CARREGADO!")
